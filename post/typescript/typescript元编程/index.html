<!DOCTYPE html>
<html lang="en"><head>
    <title>rx-78-kum0</title>
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type">
    <meta content="utf-8" http-equiv="encoding">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="format-detection" content="telephone=no" />
    <meta name="theme-color" content="#000084" />
    <link rel="icon" href="https://rx-78-kum0.github.io//favicon.ico">
    <link rel="canonical" href="https://rx-78-kum0.github.io/">
    
    
</head>
<body>
<nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="navbar-inner">
        <div class="container">
            <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse"></button>
            <a class="brand" href="https://rx-78-kum0.github.io/">rx-78-kum0</a>
            <div class="nav-collapse collapse">
                <ul class="nav">
                    
                    
                        
                            <li>
                                <a href="/post/">
                                    
                                    <span>Posts</span>
                                </a>
                            </li>
                        
                    
                        
                            <li>
                                <a href="/about/">
                                    
                                    <span>About</span>
                                </a>
                            </li>
                        
                    
                </ul>
            </div>
        </div>
    </div>
</nav><div id="content" class="container">

<div class="row-fluid navmargin">
    <div class="page-header">
        <h1>Typescript元编程 - Thu, Feb 27, 2020</h1>
    </div>
    <p class="lead">typescript 实现元编程</p>
    <div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-typescript" data-lang="typescript"><span style="color:#75715e">// 硬编码一个二进制 trie
</span><span style="color:#75715e"></span><span style="color:#a6e22e">type</span> <span style="color:#a6e22e">BinaryTrie</span> <span style="color:#f92672">=</span> [
  [
    [
      [
        [[[[<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">1</span>], [<span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>]], [[<span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">5</span>], [<span style="color:#ae81ff">6</span>, <span style="color:#ae81ff">7</span>]]], [[[<span style="color:#ae81ff">8</span>, <span style="color:#ae81ff">9</span>], [<span style="color:#ae81ff">10</span>, <span style="color:#ae81ff">11</span>]], [[<span style="color:#ae81ff">12</span>, <span style="color:#ae81ff">13</span>], [<span style="color:#ae81ff">14</span>, <span style="color:#ae81ff">15</span>]]]],
        [[[[<span style="color:#ae81ff">16</span>, <span style="color:#ae81ff">17</span>], [<span style="color:#ae81ff">18</span>, <span style="color:#ae81ff">19</span>]], [[<span style="color:#ae81ff">20</span>, <span style="color:#ae81ff">21</span>], [<span style="color:#ae81ff">22</span>, <span style="color:#ae81ff">23</span>]]], [[[<span style="color:#ae81ff">24</span>, <span style="color:#ae81ff">25</span>], [<span style="color:#ae81ff">26</span>, <span style="color:#ae81ff">27</span>]], [[<span style="color:#ae81ff">28</span>, <span style="color:#ae81ff">29</span>], [<span style="color:#ae81ff">30</span>, <span style="color:#ae81ff">31</span>]]]]
      ],
      [
        [[[[<span style="color:#ae81ff">32</span>, <span style="color:#ae81ff">33</span>], [<span style="color:#ae81ff">34</span>, <span style="color:#ae81ff">35</span>]], [[<span style="color:#ae81ff">36</span>, <span style="color:#ae81ff">37</span>], [<span style="color:#ae81ff">38</span>, <span style="color:#ae81ff">39</span>]]], [[[<span style="color:#ae81ff">40</span>, <span style="color:#ae81ff">41</span>], [<span style="color:#ae81ff">42</span>, <span style="color:#ae81ff">43</span>]], [[<span style="color:#ae81ff">44</span>, <span style="color:#ae81ff">45</span>], [<span style="color:#ae81ff">46</span>, <span style="color:#ae81ff">47</span>]]]],
        [[[[<span style="color:#ae81ff">48</span>, <span style="color:#ae81ff">49</span>], [<span style="color:#ae81ff">50</span>, <span style="color:#ae81ff">51</span>]], [[<span style="color:#ae81ff">52</span>, <span style="color:#ae81ff">53</span>], [<span style="color:#ae81ff">54</span>, <span style="color:#ae81ff">55</span>]]], [[[<span style="color:#ae81ff">56</span>, <span style="color:#ae81ff">57</span>], [<span style="color:#ae81ff">58</span>, <span style="color:#ae81ff">59</span>]], [[<span style="color:#ae81ff">60</span>, <span style="color:#ae81ff">61</span>], [<span style="color:#ae81ff">62</span>, <span style="color:#ae81ff">63</span>]]]]
      ]
    ],
    [
      [
        [[[[<span style="color:#ae81ff">64</span>, <span style="color:#ae81ff">65</span>], [<span style="color:#ae81ff">66</span>, <span style="color:#ae81ff">67</span>]], [[<span style="color:#ae81ff">68</span>, <span style="color:#ae81ff">69</span>], [<span style="color:#ae81ff">70</span>, <span style="color:#ae81ff">71</span>]]], [[[<span style="color:#ae81ff">72</span>, <span style="color:#ae81ff">73</span>], [<span style="color:#ae81ff">74</span>, <span style="color:#ae81ff">75</span>]], [[<span style="color:#ae81ff">76</span>, <span style="color:#ae81ff">77</span>], [<span style="color:#ae81ff">78</span>, <span style="color:#ae81ff">79</span>]]]],
        [[[[<span style="color:#ae81ff">80</span>, <span style="color:#ae81ff">81</span>], [<span style="color:#ae81ff">82</span>, <span style="color:#ae81ff">83</span>]], [[<span style="color:#ae81ff">84</span>, <span style="color:#ae81ff">85</span>], [<span style="color:#ae81ff">86</span>, <span style="color:#ae81ff">87</span>]]], [[[<span style="color:#ae81ff">88</span>, <span style="color:#ae81ff">89</span>], [<span style="color:#ae81ff">90</span>, <span style="color:#ae81ff">91</span>]], [[<span style="color:#ae81ff">92</span>, <span style="color:#ae81ff">93</span>], [<span style="color:#ae81ff">94</span>, <span style="color:#ae81ff">95</span>]]]]
      ],
      [
        [[[[<span style="color:#ae81ff">96</span>, <span style="color:#ae81ff">97</span>], [<span style="color:#ae81ff">98</span>, <span style="color:#ae81ff">99</span>]], [[<span style="color:#ae81ff">100</span>, <span style="color:#ae81ff">101</span>], [<span style="color:#ae81ff">102</span>, <span style="color:#ae81ff">103</span>]]], [[[<span style="color:#ae81ff">104</span>, <span style="color:#ae81ff">105</span>], [<span style="color:#ae81ff">106</span>, <span style="color:#ae81ff">107</span>]], [[<span style="color:#ae81ff">108</span>, <span style="color:#ae81ff">109</span>], [<span style="color:#ae81ff">110</span>, <span style="color:#ae81ff">111</span>]]]],
        [[[[<span style="color:#ae81ff">112</span>, <span style="color:#ae81ff">113</span>], [<span style="color:#ae81ff">114</span>, <span style="color:#ae81ff">115</span>]], [[<span style="color:#ae81ff">116</span>, <span style="color:#ae81ff">117</span>], [<span style="color:#ae81ff">118</span>, <span style="color:#ae81ff">119</span>]]], [[[<span style="color:#ae81ff">120</span>, <span style="color:#ae81ff">121</span>], [<span style="color:#ae81ff">122</span>, <span style="color:#ae81ff">123</span>]], [[<span style="color:#ae81ff">124</span>, <span style="color:#ae81ff">125</span>], [<span style="color:#ae81ff">126</span>, <span style="color:#ae81ff">127</span>]]]]
      ]
    ]
  ],
  [
    [
      [
        [[[[<span style="color:#ae81ff">128</span>, <span style="color:#ae81ff">129</span>], [<span style="color:#ae81ff">130</span>, <span style="color:#ae81ff">131</span>]], [[<span style="color:#ae81ff">132</span>, <span style="color:#ae81ff">133</span>], [<span style="color:#ae81ff">134</span>, <span style="color:#ae81ff">135</span>]]], [[[<span style="color:#ae81ff">136</span>, <span style="color:#ae81ff">137</span>], [<span style="color:#ae81ff">138</span>, <span style="color:#ae81ff">139</span>]], [[<span style="color:#ae81ff">140</span>, <span style="color:#ae81ff">141</span>], [<span style="color:#ae81ff">142</span>, <span style="color:#ae81ff">143</span>]]]],
        [[[[<span style="color:#ae81ff">144</span>, <span style="color:#ae81ff">145</span>], [<span style="color:#ae81ff">146</span>, <span style="color:#ae81ff">147</span>]], [[<span style="color:#ae81ff">148</span>, <span style="color:#ae81ff">149</span>], [<span style="color:#ae81ff">150</span>, <span style="color:#ae81ff">151</span>]]], [[[<span style="color:#ae81ff">152</span>, <span style="color:#ae81ff">153</span>], [<span style="color:#ae81ff">154</span>, <span style="color:#ae81ff">155</span>]], [[<span style="color:#ae81ff">156</span>, <span style="color:#ae81ff">157</span>], [<span style="color:#ae81ff">158</span>, <span style="color:#ae81ff">159</span>]]]]
      ],
      [
        [[[[<span style="color:#ae81ff">160</span>, <span style="color:#ae81ff">161</span>], [<span style="color:#ae81ff">162</span>, <span style="color:#ae81ff">163</span>]], [[<span style="color:#ae81ff">164</span>, <span style="color:#ae81ff">165</span>], [<span style="color:#ae81ff">166</span>, <span style="color:#ae81ff">167</span>]]], [[[<span style="color:#ae81ff">168</span>, <span style="color:#ae81ff">169</span>], [<span style="color:#ae81ff">170</span>, <span style="color:#ae81ff">171</span>]], [[<span style="color:#ae81ff">172</span>, <span style="color:#ae81ff">173</span>], [<span style="color:#ae81ff">174</span>, <span style="color:#ae81ff">175</span>]]]],
        [[[[<span style="color:#ae81ff">176</span>, <span style="color:#ae81ff">177</span>], [<span style="color:#ae81ff">178</span>, <span style="color:#ae81ff">179</span>]], [[<span style="color:#ae81ff">180</span>, <span style="color:#ae81ff">181</span>], [<span style="color:#ae81ff">182</span>, <span style="color:#ae81ff">183</span>]]], [[[<span style="color:#ae81ff">184</span>, <span style="color:#ae81ff">185</span>], [<span style="color:#ae81ff">186</span>, <span style="color:#ae81ff">187</span>]], [[<span style="color:#ae81ff">188</span>, <span style="color:#ae81ff">189</span>], [<span style="color:#ae81ff">190</span>, <span style="color:#ae81ff">191</span>]]]]
      ]
    ],
    [
      [
        [[[[<span style="color:#ae81ff">192</span>, <span style="color:#ae81ff">193</span>], [<span style="color:#ae81ff">194</span>, <span style="color:#ae81ff">195</span>]], [[<span style="color:#ae81ff">196</span>, <span style="color:#ae81ff">197</span>], [<span style="color:#ae81ff">198</span>, <span style="color:#ae81ff">199</span>]]], [[[<span style="color:#ae81ff">200</span>, <span style="color:#ae81ff">201</span>], [<span style="color:#ae81ff">202</span>, <span style="color:#ae81ff">203</span>]], [[<span style="color:#ae81ff">204</span>, <span style="color:#ae81ff">205</span>], [<span style="color:#ae81ff">206</span>, <span style="color:#ae81ff">207</span>]]]],
        [[[[<span style="color:#ae81ff">208</span>, <span style="color:#ae81ff">209</span>], [<span style="color:#ae81ff">210</span>, <span style="color:#ae81ff">211</span>]], [[<span style="color:#ae81ff">212</span>, <span style="color:#ae81ff">213</span>], [<span style="color:#ae81ff">214</span>, <span style="color:#ae81ff">215</span>]]], [[[<span style="color:#ae81ff">216</span>, <span style="color:#ae81ff">217</span>], [<span style="color:#ae81ff">218</span>, <span style="color:#ae81ff">219</span>]], [[<span style="color:#ae81ff">220</span>, <span style="color:#ae81ff">221</span>], [<span style="color:#ae81ff">222</span>, <span style="color:#ae81ff">223</span>]]]]
      ],
      [
        [[[[<span style="color:#ae81ff">224</span>, <span style="color:#ae81ff">225</span>], [<span style="color:#ae81ff">226</span>, <span style="color:#ae81ff">227</span>]], [[<span style="color:#ae81ff">228</span>, <span style="color:#ae81ff">229</span>], [<span style="color:#ae81ff">230</span>, <span style="color:#ae81ff">231</span>]]], [[[<span style="color:#ae81ff">232</span>, <span style="color:#ae81ff">233</span>], [<span style="color:#ae81ff">234</span>, <span style="color:#ae81ff">235</span>]], [[<span style="color:#ae81ff">236</span>, <span style="color:#ae81ff">237</span>], [<span style="color:#ae81ff">238</span>, <span style="color:#ae81ff">239</span>]]]],
        [[[[<span style="color:#ae81ff">240</span>, <span style="color:#ae81ff">241</span>], [<span style="color:#ae81ff">242</span>, <span style="color:#ae81ff">243</span>]], [[<span style="color:#ae81ff">244</span>, <span style="color:#ae81ff">245</span>], [<span style="color:#ae81ff">246</span>, <span style="color:#ae81ff">247</span>]]], [[[<span style="color:#ae81ff">248</span>, <span style="color:#ae81ff">249</span>], [<span style="color:#ae81ff">250</span>, <span style="color:#ae81ff">251</span>]], [[<span style="color:#ae81ff">252</span>, <span style="color:#ae81ff">253</span>], [<span style="color:#ae81ff">254</span>, <span style="color:#ae81ff">255</span>]]]]
      ]
    ]
  ]
];

<span style="color:#75715e">// 数组操作
</span><span style="color:#75715e"></span><span style="color:#a6e22e">type</span> <span style="color:#a6e22e">Copy</span>&lt;<span style="color:#f92672">T</span><span style="color:#960050;background-color:#1e0010">,</span> <span style="color:#a6e22e">S</span> <span style="color:#a6e22e">extends</span> <span style="color:#a6e22e">any</span>&gt; <span style="color:#f92672">=</span> { [<span style="color:#a6e22e">P</span> <span style="color:#66d9ef">in</span> <span style="color:#a6e22e">keyof</span> <span style="color:#a6e22e">T</span>]<span style="color:#f92672">:</span> <span style="color:#a6e22e">S</span>[<span style="color:#a6e22e">P</span>] };

<span style="color:#a6e22e">type</span> <span style="color:#a6e22e">Unshift</span>&lt;<span style="color:#f92672">T</span><span style="color:#960050;background-color:#1e0010">,</span> <span style="color:#a6e22e">A</span>&gt; <span style="color:#f92672">=</span> ((<span style="color:#a6e22e">a</span>: <span style="color:#66d9ef">A</span>, ...<span style="color:#a6e22e">b</span>: <span style="color:#66d9ef">T</span> <span style="color:#66d9ef">extends</span> <span style="color:#a6e22e">any</span>[] <span style="color:#f92672">?</span> <span style="color:#a6e22e">T</span> : <span style="color:#66d9ef">never</span>) <span style="color:#f92672">=&gt;</span> <span style="color:#66d9ef">void</span>) <span style="color:#66d9ef">extends</span> (...<span style="color:#a6e22e">a</span>: <span style="color:#66d9ef">infer</span> <span style="color:#a6e22e">R</span>) <span style="color:#f92672">=&gt;</span> <span style="color:#66d9ef">void</span> <span style="color:#f92672">?</span> <span style="color:#a6e22e">R</span> : <span style="color:#66d9ef">never</span>;

<span style="color:#a6e22e">type</span> <span style="color:#a6e22e">Push</span>&lt;<span style="color:#f92672">T</span><span style="color:#960050;background-color:#1e0010">,</span> <span style="color:#a6e22e">A</span>&gt; <span style="color:#f92672">=</span> <span style="color:#a6e22e">Copy</span>&lt;<span style="color:#f92672">Unshift</span><span style="color:#960050;background-color:#1e0010">&lt;</span><span style="color:#a6e22e">T</span><span style="color:#960050;background-color:#1e0010">,</span> <span style="color:#a6e22e">any</span>&gt;, <span style="color:#a6e22e">T</span> <span style="color:#f92672">&amp;</span> <span style="color:#a6e22e">Record</span>&lt;<span style="color:#f92672">string</span><span style="color:#960050;background-color:#1e0010">,</span> <span style="color:#a6e22e">A</span>&gt;<span style="color:#f92672">&gt;</span>;

<span style="color:#75715e">// 搜索二进制 trie
</span><span style="color:#75715e"></span><span style="color:#a6e22e">type</span> <span style="color:#a6e22e">SearchInTrie</span>&lt;<span style="color:#f92672">Num</span><span style="color:#960050;background-color:#1e0010">,</span> <span style="color:#a6e22e">Node</span><span style="color:#960050;background-color:#1e0010">,</span> <span style="color:#a6e22e">Digits</span>&gt; <span style="color:#f92672">=</span> {
  <span style="color:#a6e22e">1</span>: <span style="color:#66d9ef">Node</span> <span style="color:#66d9ef">extends</span> [<span style="color:#a6e22e">infer</span> <span style="color:#a6e22e">A</span>, <span style="color:#a6e22e">infer</span> <span style="color:#a6e22e">B</span>]
    <span style="color:#f92672">?</span> <span style="color:#a6e22e">Num</span> <span style="color:#66d9ef">extends</span> <span style="color:#a6e22e">A</span>
      <span style="color:#f92672">?</span> <span style="color:#a6e22e">Push</span>&lt;<span style="color:#f92672">Digits</span><span style="color:#960050;background-color:#1e0010">,</span> <span style="color:#a6e22e">0</span>&gt;
      <span style="color:#f92672">:</span> <span style="color:#a6e22e">Num</span> <span style="color:#66d9ef">extends</span> <span style="color:#a6e22e">B</span>
      <span style="color:#f92672">?</span> <span style="color:#a6e22e">Push</span>&lt;<span style="color:#f92672">Digits</span><span style="color:#960050;background-color:#1e0010">,</span> <span style="color:#a6e22e">1</span>&gt;
      <span style="color:#f92672">:</span> <span style="color:#a6e22e">never</span>
    : <span style="color:#66d9ef">never</span>;

  <span style="color:#a6e22e">0</span>: <span style="color:#66d9ef">Node</span> <span style="color:#66d9ef">extends</span> [<span style="color:#a6e22e">infer</span> <span style="color:#a6e22e">A</span>, <span style="color:#a6e22e">infer</span> <span style="color:#a6e22e">B</span>]
    <span style="color:#f92672">?</span> <span style="color:#a6e22e">SearchInTrie</span>&lt;<span style="color:#f92672">Num</span><span style="color:#960050;background-color:#1e0010">,</span> <span style="color:#a6e22e">A</span><span style="color:#960050;background-color:#1e0010">,</span> <span style="color:#a6e22e">Push</span><span style="color:#960050;background-color:#1e0010">&lt;</span><span style="color:#a6e22e">Digits</span><span style="color:#960050;background-color:#1e0010">,</span> <span style="color:#a6e22e">0</span>&gt;<span style="color:#f92672">&gt;</span> <span style="color:#f92672">|</span> <span style="color:#a6e22e">SearchInTrie</span>&lt;<span style="color:#f92672">Num</span><span style="color:#960050;background-color:#1e0010">,</span> <span style="color:#a6e22e">B</span><span style="color:#960050;background-color:#1e0010">,</span> <span style="color:#a6e22e">Push</span><span style="color:#960050;background-color:#1e0010">&lt;</span><span style="color:#a6e22e">Digits</span><span style="color:#960050;background-color:#1e0010">,</span> <span style="color:#a6e22e">1</span>&gt;<span style="color:#f92672">&gt;</span>
    <span style="color:#f92672">:</span> <span style="color:#a6e22e">never</span>;
}[<span style="color:#a6e22e">Node</span> <span style="color:#66d9ef">extends</span> [<span style="color:#66d9ef">number</span>, <span style="color:#66d9ef">number</span>] <span style="color:#f92672">?</span> <span style="color:#a6e22e">1</span> : <span style="color:#66d9ef">0</span>];

<span style="color:#75715e">// 定义数字类型
</span><span style="color:#75715e"></span><span style="color:#a6e22e">type</span> <span style="color:#a6e22e">Digit</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span> <span style="color:#f92672">|</span> <span style="color:#ae81ff">1</span>;
<span style="color:#a6e22e">type</span> <span style="color:#a6e22e">Bits</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span> <span style="color:#f92672">|</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">|</span> <span style="color:#ae81ff">2</span> <span style="color:#f92672">|</span> <span style="color:#ae81ff">3</span> <span style="color:#f92672">|</span> <span style="color:#ae81ff">4</span> <span style="color:#f92672">|</span> <span style="color:#ae81ff">5</span> <span style="color:#f92672">|</span> <span style="color:#ae81ff">6</span> <span style="color:#f92672">|</span> <span style="color:#ae81ff">7</span>;
<span style="color:#a6e22e">type</span> <span style="color:#a6e22e">Uint8</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">Record</span>&lt;<span style="color:#f92672">Bits</span><span style="color:#960050;background-color:#1e0010">,</span> <span style="color:#a6e22e">Digit</span>&gt;; <span style="color:#75715e">// 也可以定义成8个Digit的数组，这样写比较简短
</span><span style="color:#75715e"></span>
<span style="color:#a6e22e">type</span> <span style="color:#a6e22e">AsDigit</span>&lt;<span style="color:#f92672">T</span>&gt; <span style="color:#f92672">=</span> <span style="color:#a6e22e">T</span> <span style="color:#66d9ef">extends</span> <span style="color:#a6e22e">Digit</span> <span style="color:#f92672">?</span> <span style="color:#a6e22e">T</span> : <span style="color:#66d9ef">never</span>;
<span style="color:#a6e22e">type</span> <span style="color:#a6e22e">AsUint8</span>&lt;<span style="color:#f92672">T</span>&gt; <span style="color:#f92672">=</span> <span style="color:#a6e22e">T</span> <span style="color:#66d9ef">extends</span> <span style="color:#a6e22e">Uint8</span> <span style="color:#f92672">?</span> <span style="color:#a6e22e">T</span> : <span style="color:#66d9ef">never</span>;

<span style="color:#75715e">// 数字转二进制表示
</span><span style="color:#75715e"></span><span style="color:#a6e22e">type</span> <span style="color:#a6e22e">ToUint8</span>&lt;<span style="color:#f92672">A</span> <span style="color:#a6e22e">extends</span> <span style="color:#a6e22e">number</span>&gt; <span style="color:#f92672">=</span> <span style="color:#a6e22e">SearchInTrie</span>&lt;<span style="color:#f92672">A</span><span style="color:#960050;background-color:#1e0010">,</span> <span style="color:#a6e22e">BinaryTrie</span><span style="color:#960050;background-color:#1e0010">,</span> <span style="color:#960050;background-color:#1e0010">[]</span>&gt;;

<span style="color:#75715e">// 二进制表示转数字
</span><span style="color:#75715e"></span><span style="color:#a6e22e">type</span> <span style="color:#a6e22e">ToNumber</span>&lt;<span style="color:#f92672">A</span> <span style="color:#a6e22e">extends</span> <span style="color:#a6e22e">Uint8</span>&gt; <span style="color:#f92672">=</span> <span style="color:#a6e22e">BinaryTrie</span>[<span style="color:#a6e22e">A</span>[<span style="color:#ae81ff">0</span>]][<span style="color:#a6e22e">A</span>[<span style="color:#ae81ff">1</span>]][<span style="color:#a6e22e">A</span>[<span style="color:#ae81ff">2</span>]][<span style="color:#a6e22e">A</span>[<span style="color:#ae81ff">3</span>]][<span style="color:#a6e22e">A</span>[<span style="color:#ae81ff">4</span>]][<span style="color:#a6e22e">A</span>[<span style="color:#ae81ff">5</span>]][<span style="color:#a6e22e">A</span>[<span style="color:#ae81ff">6</span>]][<span style="color:#a6e22e">A</span>[<span style="color:#ae81ff">7</span>]];

<span style="color:#75715e">// 两个1 bit数相加，C 表示进位
</span><span style="color:#75715e"></span><span style="color:#a6e22e">type</span> <span style="color:#a6e22e">BitAdd</span>&lt;<span style="color:#f92672">A</span> <span style="color:#a6e22e">extends</span> <span style="color:#a6e22e">Digit</span><span style="color:#960050;background-color:#1e0010">,</span> <span style="color:#a6e22e">B</span> <span style="color:#a6e22e">extends</span> <span style="color:#a6e22e">Digit</span><span style="color:#960050;background-color:#1e0010">,</span> <span style="color:#a6e22e">C</span> <span style="color:#a6e22e">extends</span> <span style="color:#a6e22e">Digit</span>&gt; <span style="color:#f92672">=</span> [
  [[[<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>], [<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">0</span>]], [[<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">0</span>], [<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">1</span>]]],
  [[[<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">0</span>], [<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">1</span>]], [[<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">1</span>], [<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">1</span>]]]
][<span style="color:#a6e22e">A</span>][<span style="color:#a6e22e">B</span>][<span style="color:#a6e22e">C</span>];

<span style="color:#75715e">// 8位数相加
</span><span style="color:#75715e"></span><span style="color:#a6e22e">type</span> <span style="color:#a6e22e">Uint8Add</span>&lt;<span style="color:#f92672">A</span> <span style="color:#a6e22e">extends</span> <span style="color:#a6e22e">Uint8</span><span style="color:#960050;background-color:#1e0010">,</span> <span style="color:#a6e22e">B</span> <span style="color:#a6e22e">extends</span> <span style="color:#a6e22e">Uint8</span>&gt; <span style="color:#f92672">=</span> <span style="color:#a6e22e">BitAdd</span>&lt;<span style="color:#f92672">A</span><span style="color:#960050;background-color:#1e0010">[</span><span style="color:#a6e22e">7</span><span style="color:#960050;background-color:#1e0010">],</span> <span style="color:#a6e22e">B</span><span style="color:#960050;background-color:#1e0010">[</span><span style="color:#a6e22e">7</span><span style="color:#960050;background-color:#1e0010">],</span> <span style="color:#a6e22e">0</span>&gt; <span style="color:#66d9ef">extends</span> [<span style="color:#a6e22e">infer</span> <span style="color:#a6e22e">S7</span>, <span style="color:#a6e22e">infer</span> <span style="color:#a6e22e">C</span>]
  <span style="color:#f92672">?</span> <span style="color:#a6e22e">BitAdd</span>&lt;<span style="color:#f92672">A</span><span style="color:#960050;background-color:#1e0010">[</span><span style="color:#a6e22e">6</span><span style="color:#960050;background-color:#1e0010">],</span> <span style="color:#a6e22e">B</span><span style="color:#960050;background-color:#1e0010">[</span><span style="color:#a6e22e">6</span><span style="color:#960050;background-color:#1e0010">],</span> <span style="color:#a6e22e">AsDigit</span><span style="color:#960050;background-color:#1e0010">&lt;</span><span style="color:#a6e22e">C</span>&gt;<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">extends</span> [<span style="color:#a6e22e">infer</span> <span style="color:#a6e22e">S6</span>, <span style="color:#a6e22e">infer</span> <span style="color:#a6e22e">C</span>]
    <span style="color:#f92672">?</span> <span style="color:#a6e22e">BitAdd</span>&lt;<span style="color:#f92672">A</span><span style="color:#960050;background-color:#1e0010">[</span><span style="color:#a6e22e">5</span><span style="color:#960050;background-color:#1e0010">],</span> <span style="color:#a6e22e">B</span><span style="color:#960050;background-color:#1e0010">[</span><span style="color:#a6e22e">5</span><span style="color:#960050;background-color:#1e0010">],</span> <span style="color:#a6e22e">AsDigit</span><span style="color:#960050;background-color:#1e0010">&lt;</span><span style="color:#a6e22e">C</span>&gt;<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">extends</span> [<span style="color:#a6e22e">infer</span> <span style="color:#a6e22e">S5</span>, <span style="color:#a6e22e">infer</span> <span style="color:#a6e22e">C</span>]
      <span style="color:#f92672">?</span> <span style="color:#a6e22e">BitAdd</span>&lt;<span style="color:#f92672">A</span><span style="color:#960050;background-color:#1e0010">[</span><span style="color:#a6e22e">4</span><span style="color:#960050;background-color:#1e0010">],</span> <span style="color:#a6e22e">B</span><span style="color:#960050;background-color:#1e0010">[</span><span style="color:#a6e22e">4</span><span style="color:#960050;background-color:#1e0010">],</span> <span style="color:#a6e22e">AsDigit</span><span style="color:#960050;background-color:#1e0010">&lt;</span><span style="color:#a6e22e">C</span>&gt;<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">extends</span> [<span style="color:#a6e22e">infer</span> <span style="color:#a6e22e">S4</span>, <span style="color:#a6e22e">infer</span> <span style="color:#a6e22e">C</span>]
        <span style="color:#f92672">?</span> <span style="color:#a6e22e">BitAdd</span>&lt;<span style="color:#f92672">A</span><span style="color:#960050;background-color:#1e0010">[</span><span style="color:#a6e22e">3</span><span style="color:#960050;background-color:#1e0010">],</span> <span style="color:#a6e22e">B</span><span style="color:#960050;background-color:#1e0010">[</span><span style="color:#a6e22e">3</span><span style="color:#960050;background-color:#1e0010">],</span> <span style="color:#a6e22e">AsDigit</span><span style="color:#960050;background-color:#1e0010">&lt;</span><span style="color:#a6e22e">C</span>&gt;<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">extends</span> [<span style="color:#a6e22e">infer</span> <span style="color:#a6e22e">S3</span>, <span style="color:#a6e22e">infer</span> <span style="color:#a6e22e">C</span>]
          <span style="color:#f92672">?</span> <span style="color:#a6e22e">BitAdd</span>&lt;<span style="color:#f92672">A</span><span style="color:#960050;background-color:#1e0010">[</span><span style="color:#a6e22e">2</span><span style="color:#960050;background-color:#1e0010">],</span> <span style="color:#a6e22e">B</span><span style="color:#960050;background-color:#1e0010">[</span><span style="color:#a6e22e">2</span><span style="color:#960050;background-color:#1e0010">],</span> <span style="color:#a6e22e">AsDigit</span><span style="color:#960050;background-color:#1e0010">&lt;</span><span style="color:#a6e22e">C</span>&gt;<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">extends</span> [<span style="color:#a6e22e">infer</span> <span style="color:#a6e22e">S2</span>, <span style="color:#a6e22e">infer</span> <span style="color:#a6e22e">C</span>]
            <span style="color:#f92672">?</span> <span style="color:#a6e22e">BitAdd</span>&lt;<span style="color:#f92672">A</span><span style="color:#960050;background-color:#1e0010">[</span><span style="color:#a6e22e">1</span><span style="color:#960050;background-color:#1e0010">],</span> <span style="color:#a6e22e">B</span><span style="color:#960050;background-color:#1e0010">[</span><span style="color:#a6e22e">1</span><span style="color:#960050;background-color:#1e0010">],</span> <span style="color:#a6e22e">AsDigit</span><span style="color:#960050;background-color:#1e0010">&lt;</span><span style="color:#a6e22e">C</span>&gt;<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">extends</span> [<span style="color:#a6e22e">infer</span> <span style="color:#a6e22e">S1</span>, <span style="color:#a6e22e">infer</span> <span style="color:#a6e22e">C</span>]
              <span style="color:#f92672">?</span> <span style="color:#a6e22e">BitAdd</span>&lt;<span style="color:#f92672">A</span><span style="color:#960050;background-color:#1e0010">[</span><span style="color:#a6e22e">0</span><span style="color:#960050;background-color:#1e0010">],</span> <span style="color:#a6e22e">B</span><span style="color:#960050;background-color:#1e0010">[</span><span style="color:#a6e22e">0</span><span style="color:#960050;background-color:#1e0010">],</span> <span style="color:#a6e22e">AsDigit</span><span style="color:#960050;background-color:#1e0010">&lt;</span><span style="color:#a6e22e">C</span>&gt;<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">extends</span> [<span style="color:#a6e22e">infer</span> <span style="color:#a6e22e">S0</span>, <span style="color:#a6e22e">infer</span> <span style="color:#a6e22e">C</span>] <span style="color:#75715e">// ? C extends 1 ? &#34;overflow&#34; :
</span><span style="color:#75715e"></span>                <span style="color:#f92672">?</span> <span style="color:#a6e22e">AsUint8</span><span style="color:#f92672">&lt;</span>[<span style="color:#a6e22e">S0</span>, <span style="color:#a6e22e">S1</span>, <span style="color:#a6e22e">S2</span>, <span style="color:#a6e22e">S3</span>, <span style="color:#a6e22e">S4</span>, <span style="color:#a6e22e">S5</span>, <span style="color:#a6e22e">S6</span>, <span style="color:#a6e22e">S7</span>]<span style="color:#f92672">&gt;</span>
                <span style="color:#f92672">:</span> <span style="color:#a6e22e">never</span>
              : <span style="color:#66d9ef">never</span>
            <span style="color:#f92672">:</span> <span style="color:#a6e22e">never</span>
          : <span style="color:#66d9ef">never</span>
        <span style="color:#f92672">:</span> <span style="color:#a6e22e">never</span>
      : <span style="color:#66d9ef">never</span>
    <span style="color:#f92672">:</span> <span style="color:#a6e22e">never</span>
  : <span style="color:#66d9ef">never</span>;

<span style="color:#75715e">// 位取反
</span><span style="color:#75715e"></span><span style="color:#a6e22e">type</span> <span style="color:#a6e22e">Reverse</span> <span style="color:#f92672">=</span> [<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">0</span>];
<span style="color:#a6e22e">type</span> <span style="color:#a6e22e">Uint8Reverse</span>&lt;<span style="color:#f92672">A</span> <span style="color:#a6e22e">extends</span> <span style="color:#a6e22e">Uint8</span>&gt; <span style="color:#f92672">=</span> [
  <span style="color:#a6e22e">Reverse</span>[<span style="color:#a6e22e">A</span>[<span style="color:#ae81ff">0</span>]],
  <span style="color:#a6e22e">Reverse</span>[<span style="color:#a6e22e">A</span>[<span style="color:#ae81ff">1</span>]],
  <span style="color:#a6e22e">Reverse</span>[<span style="color:#a6e22e">A</span>[<span style="color:#ae81ff">2</span>]],
  <span style="color:#a6e22e">Reverse</span>[<span style="color:#a6e22e">A</span>[<span style="color:#ae81ff">3</span>]],
  <span style="color:#a6e22e">Reverse</span>[<span style="color:#a6e22e">A</span>[<span style="color:#ae81ff">4</span>]],
  <span style="color:#a6e22e">Reverse</span>[<span style="color:#a6e22e">A</span>[<span style="color:#ae81ff">5</span>]],
  <span style="color:#a6e22e">Reverse</span>[<span style="color:#a6e22e">A</span>[<span style="color:#ae81ff">6</span>]],
  <span style="color:#a6e22e">Reverse</span>[<span style="color:#a6e22e">A</span>[<span style="color:#ae81ff">7</span>]]
];

<span style="color:#75715e">// 两个特殊数字方便使用
</span><span style="color:#75715e"></span><span style="color:#a6e22e">type</span> <span style="color:#a6e22e">ZERO</span> <span style="color:#f92672">=</span> [<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>];
<span style="color:#a6e22e">type</span> <span style="color:#a6e22e">ONE</span> <span style="color:#f92672">=</span> [<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">1</span>];

<span style="color:#75715e">// 补码
</span><span style="color:#75715e"></span><span style="color:#a6e22e">type</span> <span style="color:#a6e22e">Uint8Negate</span>&lt;<span style="color:#f92672">A</span> <span style="color:#a6e22e">extends</span> <span style="color:#a6e22e">Uint8</span>&gt; <span style="color:#f92672">=</span> <span style="color:#a6e22e">Uint8Add</span>&lt;<span style="color:#f92672">Uint8Reverse</span><span style="color:#960050;background-color:#1e0010">&lt;</span><span style="color:#a6e22e">A</span>&gt;, <span style="color:#a6e22e">ONE</span><span style="color:#f92672">&gt;</span>;

<span style="color:#75715e">// 8位数相减
</span><span style="color:#75715e"></span><span style="color:#a6e22e">type</span> <span style="color:#a6e22e">Uint8Sub</span>&lt;<span style="color:#f92672">A</span> <span style="color:#a6e22e">extends</span> <span style="color:#a6e22e">Uint8</span><span style="color:#960050;background-color:#1e0010">,</span> <span style="color:#a6e22e">B</span> <span style="color:#a6e22e">extends</span> <span style="color:#a6e22e">Uint8</span>&gt; <span style="color:#f92672">=</span> <span style="color:#a6e22e">Uint8Add</span>&lt;<span style="color:#f92672">A</span><span style="color:#960050;background-color:#1e0010">,</span> <span style="color:#a6e22e">Uint8Negate</span><span style="color:#960050;background-color:#1e0010">&lt;</span><span style="color:#a6e22e">B</span>&gt;<span style="color:#f92672">&gt;</span>;

<span style="color:#75715e">// 左移
</span><span style="color:#75715e"></span><span style="color:#a6e22e">type</span> <span style="color:#a6e22e">LShift</span>&lt;<span style="color:#f92672">A</span> <span style="color:#a6e22e">extends</span> <span style="color:#a6e22e">Uint8</span><span style="color:#960050;background-color:#1e0010">,</span> <span style="color:#a6e22e">B</span> <span style="color:#a6e22e">extends</span> <span style="color:#a6e22e">number</span><span style="color:#960050;background-color:#1e0010">,</span> <span style="color:#a6e22e">P</span> <span style="color:#a6e22e">extends</span> <span style="color:#a6e22e">Digit</span>&gt; <span style="color:#f92672">=</span> <span style="color:#a6e22e">B</span> <span style="color:#66d9ef">extends</span> <span style="color:#ae81ff">1</span>
  <span style="color:#f92672">?</span> [<span style="color:#a6e22e">A</span>[<span style="color:#ae81ff">1</span>], <span style="color:#a6e22e">A</span>[<span style="color:#ae81ff">2</span>], <span style="color:#a6e22e">A</span>[<span style="color:#ae81ff">3</span>], <span style="color:#a6e22e">A</span>[<span style="color:#ae81ff">4</span>], <span style="color:#a6e22e">A</span>[<span style="color:#ae81ff">5</span>], <span style="color:#a6e22e">A</span>[<span style="color:#ae81ff">6</span>], <span style="color:#a6e22e">A</span>[<span style="color:#ae81ff">7</span>], <span style="color:#a6e22e">P</span>]
  <span style="color:#f92672">:</span> <span style="color:#a6e22e">B</span> <span style="color:#66d9ef">extends</span> <span style="color:#ae81ff">2</span>
  <span style="color:#f92672">?</span> [<span style="color:#a6e22e">A</span>[<span style="color:#ae81ff">2</span>], <span style="color:#a6e22e">A</span>[<span style="color:#ae81ff">3</span>], <span style="color:#a6e22e">A</span>[<span style="color:#ae81ff">4</span>], <span style="color:#a6e22e">A</span>[<span style="color:#ae81ff">5</span>], <span style="color:#a6e22e">A</span>[<span style="color:#ae81ff">6</span>], <span style="color:#a6e22e">A</span>[<span style="color:#ae81ff">7</span>], <span style="color:#a6e22e">P</span>, <span style="color:#a6e22e">P</span>]
  <span style="color:#f92672">:</span> <span style="color:#a6e22e">B</span> <span style="color:#66d9ef">extends</span> <span style="color:#ae81ff">3</span>
  <span style="color:#f92672">?</span> [<span style="color:#a6e22e">A</span>[<span style="color:#ae81ff">3</span>], <span style="color:#a6e22e">A</span>[<span style="color:#ae81ff">4</span>], <span style="color:#a6e22e">A</span>[<span style="color:#ae81ff">5</span>], <span style="color:#a6e22e">A</span>[<span style="color:#ae81ff">6</span>], <span style="color:#a6e22e">A</span>[<span style="color:#ae81ff">7</span>], <span style="color:#a6e22e">P</span>, <span style="color:#a6e22e">P</span>, <span style="color:#a6e22e">P</span>]
  <span style="color:#f92672">:</span> <span style="color:#a6e22e">B</span> <span style="color:#66d9ef">extends</span> <span style="color:#ae81ff">4</span>
  <span style="color:#f92672">?</span> [<span style="color:#a6e22e">A</span>[<span style="color:#ae81ff">4</span>], <span style="color:#a6e22e">A</span>[<span style="color:#ae81ff">5</span>], <span style="color:#a6e22e">A</span>[<span style="color:#ae81ff">6</span>], <span style="color:#a6e22e">A</span>[<span style="color:#ae81ff">7</span>], <span style="color:#a6e22e">P</span>, <span style="color:#a6e22e">P</span>, <span style="color:#a6e22e">P</span>, <span style="color:#a6e22e">P</span>]
  <span style="color:#f92672">:</span> <span style="color:#a6e22e">B</span> <span style="color:#66d9ef">extends</span> <span style="color:#ae81ff">5</span>
  <span style="color:#f92672">?</span> [<span style="color:#a6e22e">A</span>[<span style="color:#ae81ff">5</span>], <span style="color:#a6e22e">A</span>[<span style="color:#ae81ff">6</span>], <span style="color:#a6e22e">A</span>[<span style="color:#ae81ff">7</span>], <span style="color:#a6e22e">P</span>, <span style="color:#a6e22e">P</span>, <span style="color:#a6e22e">P</span>, <span style="color:#a6e22e">P</span>, <span style="color:#a6e22e">P</span>]
  <span style="color:#f92672">:</span> <span style="color:#a6e22e">B</span> <span style="color:#66d9ef">extends</span> <span style="color:#ae81ff">6</span>
  <span style="color:#f92672">?</span> [<span style="color:#a6e22e">A</span>[<span style="color:#ae81ff">6</span>], <span style="color:#a6e22e">A</span>[<span style="color:#ae81ff">7</span>], <span style="color:#a6e22e">P</span>, <span style="color:#a6e22e">P</span>, <span style="color:#a6e22e">P</span>, <span style="color:#a6e22e">P</span>, <span style="color:#a6e22e">P</span>, <span style="color:#a6e22e">P</span>]
  <span style="color:#f92672">:</span> <span style="color:#a6e22e">B</span> <span style="color:#66d9ef">extends</span> <span style="color:#ae81ff">7</span>
  <span style="color:#f92672">?</span> [<span style="color:#a6e22e">A</span>[<span style="color:#ae81ff">7</span>], <span style="color:#a6e22e">P</span>, <span style="color:#a6e22e">P</span>, <span style="color:#a6e22e">P</span>, <span style="color:#a6e22e">P</span>, <span style="color:#a6e22e">P</span>, <span style="color:#a6e22e">P</span>, <span style="color:#a6e22e">P</span>]
  <span style="color:#f92672">:</span> <span style="color:#a6e22e">B</span> <span style="color:#66d9ef">extends</span> <span style="color:#ae81ff">0</span>
  <span style="color:#f92672">?</span> <span style="color:#a6e22e">A</span>
  <span style="color:#f92672">:</span> [<span style="color:#a6e22e">P</span>, <span style="color:#a6e22e">P</span>, <span style="color:#a6e22e">P</span>, <span style="color:#a6e22e">P</span>, <span style="color:#a6e22e">P</span>, <span style="color:#a6e22e">P</span>, <span style="color:#a6e22e">P</span>, <span style="color:#a6e22e">P</span>];

<span style="color:#75715e">// 8位数乘1位数
</span><span style="color:#75715e"></span><span style="color:#a6e22e">type</span> <span style="color:#a6e22e">BitMul</span>&lt;<span style="color:#f92672">A</span> <span style="color:#a6e22e">extends</span> <span style="color:#a6e22e">Uint8</span><span style="color:#960050;background-color:#1e0010">,</span> <span style="color:#a6e22e">B</span> <span style="color:#a6e22e">extends</span> <span style="color:#a6e22e">Digit</span><span style="color:#960050;background-color:#1e0010">,</span> <span style="color:#a6e22e">C</span> <span style="color:#a6e22e">extends</span> <span style="color:#a6e22e">Bits</span>&gt; <span style="color:#f92672">=</span> <span style="color:#a6e22e">B</span> <span style="color:#66d9ef">extends</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">?</span> <span style="color:#a6e22e">LShift</span>&lt;<span style="color:#f92672">A</span><span style="color:#960050;background-color:#1e0010">,</span> <span style="color:#a6e22e">C</span><span style="color:#960050;background-color:#1e0010">,</span> <span style="color:#a6e22e">0</span>&gt; <span style="color:#f92672">:</span> <span style="color:#a6e22e">ZERO</span>;

<span style="color:#75715e">// 8位数相乘
</span><span style="color:#75715e"></span><span style="color:#a6e22e">type</span> <span style="color:#a6e22e">Uint8Mul</span>&lt;<span style="color:#f92672">A</span> <span style="color:#a6e22e">extends</span> <span style="color:#a6e22e">Uint8</span><span style="color:#960050;background-color:#1e0010">,</span> <span style="color:#a6e22e">B</span> <span style="color:#a6e22e">extends</span> <span style="color:#a6e22e">Uint8</span>&gt; <span style="color:#f92672">=</span> <span style="color:#a6e22e">Uint8Add</span>&lt;<span style="color:#f92672">ZERO</span><span style="color:#960050;background-color:#1e0010">,</span> <span style="color:#a6e22e">BitMul</span><span style="color:#960050;background-color:#1e0010">&lt;</span><span style="color:#a6e22e">A</span><span style="color:#960050;background-color:#1e0010">,</span> <span style="color:#a6e22e">B</span><span style="color:#960050;background-color:#1e0010">[</span><span style="color:#a6e22e">7</span><span style="color:#960050;background-color:#1e0010">],</span> <span style="color:#a6e22e">0</span>&gt;<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">extends</span> <span style="color:#a6e22e">infer</span> <span style="color:#a6e22e">S</span>
  <span style="color:#f92672">?</span> <span style="color:#a6e22e">Uint8Add</span>&lt;<span style="color:#f92672">AsUint8</span><span style="color:#960050;background-color:#1e0010">&lt;</span><span style="color:#a6e22e">S</span>&gt;, <span style="color:#a6e22e">BitMul</span>&lt;<span style="color:#f92672">A</span><span style="color:#960050;background-color:#1e0010">,</span> <span style="color:#a6e22e">B</span><span style="color:#960050;background-color:#1e0010">[</span><span style="color:#a6e22e">6</span><span style="color:#960050;background-color:#1e0010">],</span> <span style="color:#a6e22e">1</span>&gt;<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">extends</span> <span style="color:#a6e22e">infer</span> <span style="color:#a6e22e">S</span>
    <span style="color:#f92672">?</span> <span style="color:#a6e22e">Uint8Add</span>&lt;<span style="color:#f92672">AsUint8</span><span style="color:#960050;background-color:#1e0010">&lt;</span><span style="color:#a6e22e">S</span>&gt;, <span style="color:#a6e22e">BitMul</span>&lt;<span style="color:#f92672">A</span><span style="color:#960050;background-color:#1e0010">,</span> <span style="color:#a6e22e">B</span><span style="color:#960050;background-color:#1e0010">[</span><span style="color:#a6e22e">5</span><span style="color:#960050;background-color:#1e0010">],</span> <span style="color:#a6e22e">2</span>&gt;<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">extends</span> <span style="color:#a6e22e">infer</span> <span style="color:#a6e22e">S</span>
      <span style="color:#f92672">?</span> <span style="color:#a6e22e">Uint8Add</span>&lt;<span style="color:#f92672">AsUint8</span><span style="color:#960050;background-color:#1e0010">&lt;</span><span style="color:#a6e22e">S</span>&gt;, <span style="color:#a6e22e">BitMul</span>&lt;<span style="color:#f92672">A</span><span style="color:#960050;background-color:#1e0010">,</span> <span style="color:#a6e22e">B</span><span style="color:#960050;background-color:#1e0010">[</span><span style="color:#a6e22e">4</span><span style="color:#960050;background-color:#1e0010">],</span> <span style="color:#a6e22e">3</span>&gt;<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">extends</span> <span style="color:#a6e22e">infer</span> <span style="color:#a6e22e">S</span>
        <span style="color:#f92672">?</span> <span style="color:#a6e22e">Uint8Add</span>&lt;<span style="color:#f92672">AsUint8</span><span style="color:#960050;background-color:#1e0010">&lt;</span><span style="color:#a6e22e">S</span>&gt;, <span style="color:#a6e22e">BitMul</span>&lt;<span style="color:#f92672">A</span><span style="color:#960050;background-color:#1e0010">,</span> <span style="color:#a6e22e">B</span><span style="color:#960050;background-color:#1e0010">[</span><span style="color:#a6e22e">3</span><span style="color:#960050;background-color:#1e0010">],</span> <span style="color:#a6e22e">4</span>&gt;<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">extends</span> <span style="color:#a6e22e">infer</span> <span style="color:#a6e22e">S</span>
          <span style="color:#f92672">?</span> <span style="color:#a6e22e">Uint8Add</span>&lt;<span style="color:#f92672">AsUint8</span><span style="color:#960050;background-color:#1e0010">&lt;</span><span style="color:#a6e22e">S</span>&gt;, <span style="color:#a6e22e">BitMul</span>&lt;<span style="color:#f92672">A</span><span style="color:#960050;background-color:#1e0010">,</span> <span style="color:#a6e22e">B</span><span style="color:#960050;background-color:#1e0010">[</span><span style="color:#a6e22e">2</span><span style="color:#960050;background-color:#1e0010">],</span> <span style="color:#a6e22e">5</span>&gt;<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">extends</span> <span style="color:#a6e22e">infer</span> <span style="color:#a6e22e">S</span>
            <span style="color:#f92672">?</span> <span style="color:#a6e22e">Uint8Add</span>&lt;<span style="color:#f92672">AsUint8</span><span style="color:#960050;background-color:#1e0010">&lt;</span><span style="color:#a6e22e">S</span>&gt;, <span style="color:#a6e22e">BitMul</span>&lt;<span style="color:#f92672">A</span><span style="color:#960050;background-color:#1e0010">,</span> <span style="color:#a6e22e">B</span><span style="color:#960050;background-color:#1e0010">[</span><span style="color:#a6e22e">1</span><span style="color:#960050;background-color:#1e0010">],</span> <span style="color:#a6e22e">6</span>&gt;<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">extends</span> <span style="color:#a6e22e">infer</span> <span style="color:#a6e22e">S</span>
              <span style="color:#f92672">?</span> <span style="color:#a6e22e">Uint8Add</span>&lt;<span style="color:#f92672">AsUint8</span><span style="color:#960050;background-color:#1e0010">&lt;</span><span style="color:#a6e22e">S</span>&gt;, <span style="color:#a6e22e">BitMul</span>&lt;<span style="color:#f92672">A</span><span style="color:#960050;background-color:#1e0010">,</span> <span style="color:#a6e22e">B</span><span style="color:#960050;background-color:#1e0010">[</span><span style="color:#a6e22e">0</span><span style="color:#960050;background-color:#1e0010">],</span> <span style="color:#a6e22e">7</span>&gt;<span style="color:#f92672">&gt;</span>
              <span style="color:#f92672">:</span> <span style="color:#a6e22e">never</span>
            : <span style="color:#66d9ef">never</span>
          <span style="color:#f92672">:</span> <span style="color:#a6e22e">never</span>
        : <span style="color:#66d9ef">never</span>
      <span style="color:#f92672">:</span> <span style="color:#a6e22e">never</span>
    : <span style="color:#66d9ef">never</span>
  <span style="color:#f92672">:</span> <span style="color:#a6e22e">never</span>;

<span style="color:#75715e">// 比较结果
</span><span style="color:#75715e"></span><span style="color:#a6e22e">type</span> <span style="color:#a6e22e">EQ</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
<span style="color:#a6e22e">type</span> <span style="color:#a6e22e">GT</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>;
<span style="color:#a6e22e">type</span> <span style="color:#a6e22e">LT</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span>;

<span style="color:#75715e">// 1位数比较
</span><span style="color:#75715e"></span><span style="color:#a6e22e">type</span> <span style="color:#a6e22e">BitCMP</span>&lt;<span style="color:#f92672">A</span> <span style="color:#a6e22e">extends</span> <span style="color:#a6e22e">Digit</span><span style="color:#960050;background-color:#1e0010">,</span> <span style="color:#a6e22e">B</span> <span style="color:#a6e22e">extends</span> <span style="color:#a6e22e">Digit</span>&gt; <span style="color:#f92672">=</span> [[<span style="color:#a6e22e">EQ</span>, <span style="color:#a6e22e">LT</span>], [<span style="color:#a6e22e">GT</span>, <span style="color:#a6e22e">EQ</span>]][<span style="color:#a6e22e">A</span>][<span style="color:#a6e22e">B</span>];

<span style="color:#75715e">// 8位数比较
</span><span style="color:#75715e"></span><span style="color:#a6e22e">type</span> <span style="color:#a6e22e">Uint8CMP</span>&lt;<span style="color:#f92672">A</span> <span style="color:#a6e22e">extends</span> <span style="color:#a6e22e">Uint8</span><span style="color:#960050;background-color:#1e0010">,</span> <span style="color:#a6e22e">B</span> <span style="color:#a6e22e">extends</span> <span style="color:#a6e22e">Uint8</span>&gt; <span style="color:#f92672">=</span> <span style="color:#a6e22e">BitCMP</span>&lt;<span style="color:#f92672">A</span><span style="color:#960050;background-color:#1e0010">[</span><span style="color:#a6e22e">0</span><span style="color:#960050;background-color:#1e0010">],</span> <span style="color:#a6e22e">B</span><span style="color:#960050;background-color:#1e0010">[</span><span style="color:#a6e22e">0</span><span style="color:#960050;background-color:#1e0010">]</span>&gt; <span style="color:#66d9ef">extends</span> <span style="color:#a6e22e">GT</span> <span style="color:#f92672">|</span> <span style="color:#a6e22e">LT</span>
  <span style="color:#f92672">?</span> <span style="color:#a6e22e">BitCMP</span>&lt;<span style="color:#f92672">A</span><span style="color:#960050;background-color:#1e0010">[</span><span style="color:#a6e22e">0</span><span style="color:#960050;background-color:#1e0010">],</span> <span style="color:#a6e22e">B</span><span style="color:#960050;background-color:#1e0010">[</span><span style="color:#a6e22e">0</span><span style="color:#960050;background-color:#1e0010">]</span>&gt;
  <span style="color:#f92672">:</span> <span style="color:#a6e22e">BitCMP</span>&lt;<span style="color:#f92672">A</span><span style="color:#960050;background-color:#1e0010">[</span><span style="color:#a6e22e">1</span><span style="color:#960050;background-color:#1e0010">],</span> <span style="color:#a6e22e">B</span><span style="color:#960050;background-color:#1e0010">[</span><span style="color:#a6e22e">1</span><span style="color:#960050;background-color:#1e0010">]</span>&gt; <span style="color:#66d9ef">extends</span> <span style="color:#a6e22e">GT</span> <span style="color:#f92672">|</span> <span style="color:#a6e22e">LT</span>
  <span style="color:#f92672">?</span> <span style="color:#a6e22e">BitCMP</span>&lt;<span style="color:#f92672">A</span><span style="color:#960050;background-color:#1e0010">[</span><span style="color:#a6e22e">1</span><span style="color:#960050;background-color:#1e0010">],</span> <span style="color:#a6e22e">B</span><span style="color:#960050;background-color:#1e0010">[</span><span style="color:#a6e22e">1</span><span style="color:#960050;background-color:#1e0010">]</span>&gt;
  <span style="color:#f92672">:</span> <span style="color:#a6e22e">BitCMP</span>&lt;<span style="color:#f92672">A</span><span style="color:#960050;background-color:#1e0010">[</span><span style="color:#a6e22e">2</span><span style="color:#960050;background-color:#1e0010">],</span> <span style="color:#a6e22e">B</span><span style="color:#960050;background-color:#1e0010">[</span><span style="color:#a6e22e">2</span><span style="color:#960050;background-color:#1e0010">]</span>&gt; <span style="color:#66d9ef">extends</span> <span style="color:#a6e22e">GT</span> <span style="color:#f92672">|</span> <span style="color:#a6e22e">LT</span>
  <span style="color:#f92672">?</span> <span style="color:#a6e22e">BitCMP</span>&lt;<span style="color:#f92672">A</span><span style="color:#960050;background-color:#1e0010">[</span><span style="color:#a6e22e">2</span><span style="color:#960050;background-color:#1e0010">],</span> <span style="color:#a6e22e">B</span><span style="color:#960050;background-color:#1e0010">[</span><span style="color:#a6e22e">2</span><span style="color:#960050;background-color:#1e0010">]</span>&gt;
  <span style="color:#f92672">:</span> <span style="color:#a6e22e">BitCMP</span>&lt;<span style="color:#f92672">A</span><span style="color:#960050;background-color:#1e0010">[</span><span style="color:#a6e22e">3</span><span style="color:#960050;background-color:#1e0010">],</span> <span style="color:#a6e22e">B</span><span style="color:#960050;background-color:#1e0010">[</span><span style="color:#a6e22e">3</span><span style="color:#960050;background-color:#1e0010">]</span>&gt; <span style="color:#66d9ef">extends</span> <span style="color:#a6e22e">GT</span> <span style="color:#f92672">|</span> <span style="color:#a6e22e">LT</span>
  <span style="color:#f92672">?</span> <span style="color:#a6e22e">BitCMP</span>&lt;<span style="color:#f92672">A</span><span style="color:#960050;background-color:#1e0010">[</span><span style="color:#a6e22e">3</span><span style="color:#960050;background-color:#1e0010">],</span> <span style="color:#a6e22e">B</span><span style="color:#960050;background-color:#1e0010">[</span><span style="color:#a6e22e">3</span><span style="color:#960050;background-color:#1e0010">]</span>&gt;
  <span style="color:#f92672">:</span> <span style="color:#a6e22e">BitCMP</span>&lt;<span style="color:#f92672">A</span><span style="color:#960050;background-color:#1e0010">[</span><span style="color:#a6e22e">4</span><span style="color:#960050;background-color:#1e0010">],</span> <span style="color:#a6e22e">B</span><span style="color:#960050;background-color:#1e0010">[</span><span style="color:#a6e22e">4</span><span style="color:#960050;background-color:#1e0010">]</span>&gt; <span style="color:#66d9ef">extends</span> <span style="color:#a6e22e">GT</span> <span style="color:#f92672">|</span> <span style="color:#a6e22e">LT</span>
  <span style="color:#f92672">?</span> <span style="color:#a6e22e">BitCMP</span>&lt;<span style="color:#f92672">A</span><span style="color:#960050;background-color:#1e0010">[</span><span style="color:#a6e22e">4</span><span style="color:#960050;background-color:#1e0010">],</span> <span style="color:#a6e22e">B</span><span style="color:#960050;background-color:#1e0010">[</span><span style="color:#a6e22e">4</span><span style="color:#960050;background-color:#1e0010">]</span>&gt;
  <span style="color:#f92672">:</span> <span style="color:#a6e22e">BitCMP</span>&lt;<span style="color:#f92672">A</span><span style="color:#960050;background-color:#1e0010">[</span><span style="color:#a6e22e">5</span><span style="color:#960050;background-color:#1e0010">],</span> <span style="color:#a6e22e">B</span><span style="color:#960050;background-color:#1e0010">[</span><span style="color:#a6e22e">5</span><span style="color:#960050;background-color:#1e0010">]</span>&gt; <span style="color:#66d9ef">extends</span> <span style="color:#a6e22e">GT</span> <span style="color:#f92672">|</span> <span style="color:#a6e22e">LT</span>
  <span style="color:#f92672">?</span> <span style="color:#a6e22e">BitCMP</span>&lt;<span style="color:#f92672">A</span><span style="color:#960050;background-color:#1e0010">[</span><span style="color:#a6e22e">5</span><span style="color:#960050;background-color:#1e0010">],</span> <span style="color:#a6e22e">B</span><span style="color:#960050;background-color:#1e0010">[</span><span style="color:#a6e22e">5</span><span style="color:#960050;background-color:#1e0010">]</span>&gt;
  <span style="color:#f92672">:</span> <span style="color:#a6e22e">BitCMP</span>&lt;<span style="color:#f92672">A</span><span style="color:#960050;background-color:#1e0010">[</span><span style="color:#a6e22e">6</span><span style="color:#960050;background-color:#1e0010">],</span> <span style="color:#a6e22e">B</span><span style="color:#960050;background-color:#1e0010">[</span><span style="color:#a6e22e">6</span><span style="color:#960050;background-color:#1e0010">]</span>&gt; <span style="color:#66d9ef">extends</span> <span style="color:#a6e22e">GT</span> <span style="color:#f92672">|</span> <span style="color:#a6e22e">LT</span>
  <span style="color:#f92672">?</span> <span style="color:#a6e22e">BitCMP</span>&lt;<span style="color:#f92672">A</span><span style="color:#960050;background-color:#1e0010">[</span><span style="color:#a6e22e">6</span><span style="color:#960050;background-color:#1e0010">],</span> <span style="color:#a6e22e">B</span><span style="color:#960050;background-color:#1e0010">[</span><span style="color:#a6e22e">6</span><span style="color:#960050;background-color:#1e0010">]</span>&gt;
  <span style="color:#f92672">:</span> <span style="color:#a6e22e">BitCMP</span>&lt;<span style="color:#f92672">A</span><span style="color:#960050;background-color:#1e0010">[</span><span style="color:#a6e22e">7</span><span style="color:#960050;background-color:#1e0010">],</span> <span style="color:#a6e22e">B</span><span style="color:#960050;background-color:#1e0010">[</span><span style="color:#a6e22e">7</span><span style="color:#960050;background-color:#1e0010">]</span>&gt;;

<span style="color:#75715e">// 简单求余
</span><span style="color:#75715e"></span><span style="color:#a6e22e">type</span> <span style="color:#a6e22e">Remainder</span>&lt;<span style="color:#f92672">A</span> <span style="color:#a6e22e">extends</span> <span style="color:#a6e22e">Uint8</span><span style="color:#960050;background-color:#1e0010">,</span> <span style="color:#a6e22e">B</span> <span style="color:#a6e22e">extends</span> <span style="color:#a6e22e">Uint8</span>&gt; <span style="color:#f92672">=</span> <span style="color:#a6e22e">Uint8CMP</span>&lt;<span style="color:#f92672">A</span><span style="color:#960050;background-color:#1e0010">,</span> <span style="color:#a6e22e">B</span>&gt; <span style="color:#66d9ef">extends</span> <span style="color:#a6e22e">LT</span> <span style="color:#f92672">?</span> [<span style="color:#ae81ff">0</span>, <span style="color:#a6e22e">A</span>] <span style="color:#f92672">:</span> [<span style="color:#ae81ff">1</span>, <span style="color:#a6e22e">Uint8Sub</span>&lt;<span style="color:#f92672">A</span><span style="color:#960050;background-color:#1e0010">,</span> <span style="color:#a6e22e">B</span>&gt;];

<span style="color:#75715e">// 8位数相除
</span><span style="color:#75715e"></span><span style="color:#a6e22e">type</span> <span style="color:#a6e22e">Uint8Div</span>&lt;<span style="color:#f92672">A</span> <span style="color:#a6e22e">extends</span> <span style="color:#a6e22e">Uint8</span><span style="color:#960050;background-color:#1e0010">,</span> <span style="color:#a6e22e">B</span> <span style="color:#a6e22e">extends</span> <span style="color:#a6e22e">Uint8</span>&gt; <span style="color:#f92672">=</span> <span style="color:#a6e22e">Remainder</span>&lt;<span style="color:#f92672">LShift</span><span style="color:#960050;background-color:#1e0010">&lt;</span><span style="color:#a6e22e">ZERO</span><span style="color:#960050;background-color:#1e0010">,</span> <span style="color:#a6e22e">1</span><span style="color:#960050;background-color:#1e0010">,</span> <span style="color:#a6e22e">A</span><span style="color:#960050;background-color:#1e0010">[</span><span style="color:#a6e22e">0</span><span style="color:#960050;background-color:#1e0010">]</span>&gt;, <span style="color:#a6e22e">B</span><span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">extends</span> [<span style="color:#a6e22e">infer</span> <span style="color:#a6e22e">Q0</span>, <span style="color:#a6e22e">infer</span> <span style="color:#a6e22e">R</span>]
  <span style="color:#f92672">?</span> <span style="color:#a6e22e">Remainder</span>&lt;<span style="color:#f92672">LShift</span><span style="color:#960050;background-color:#1e0010">&lt;</span><span style="color:#a6e22e">AsUint8</span><span style="color:#960050;background-color:#1e0010">&lt;</span><span style="color:#a6e22e">R</span>&gt;, <span style="color:#ae81ff">1</span>, <span style="color:#a6e22e">A</span>[<span style="color:#ae81ff">1</span>]<span style="color:#f92672">&gt;</span>, <span style="color:#a6e22e">B</span><span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">extends</span> [<span style="color:#a6e22e">infer</span> <span style="color:#a6e22e">Q1</span>, <span style="color:#a6e22e">infer</span> <span style="color:#a6e22e">R</span>]
    <span style="color:#f92672">?</span> <span style="color:#a6e22e">Remainder</span>&lt;<span style="color:#f92672">LShift</span><span style="color:#960050;background-color:#1e0010">&lt;</span><span style="color:#a6e22e">AsUint8</span><span style="color:#960050;background-color:#1e0010">&lt;</span><span style="color:#a6e22e">R</span>&gt;, <span style="color:#ae81ff">1</span>, <span style="color:#a6e22e">A</span>[<span style="color:#ae81ff">2</span>]<span style="color:#f92672">&gt;</span>, <span style="color:#a6e22e">B</span><span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">extends</span> [<span style="color:#a6e22e">infer</span> <span style="color:#a6e22e">Q2</span>, <span style="color:#a6e22e">infer</span> <span style="color:#a6e22e">R</span>]
      <span style="color:#f92672">?</span> <span style="color:#a6e22e">Remainder</span>&lt;<span style="color:#f92672">LShift</span><span style="color:#960050;background-color:#1e0010">&lt;</span><span style="color:#a6e22e">AsUint8</span><span style="color:#960050;background-color:#1e0010">&lt;</span><span style="color:#a6e22e">R</span>&gt;, <span style="color:#ae81ff">1</span>, <span style="color:#a6e22e">A</span>[<span style="color:#ae81ff">3</span>]<span style="color:#f92672">&gt;</span>, <span style="color:#a6e22e">B</span><span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">extends</span> [<span style="color:#a6e22e">infer</span> <span style="color:#a6e22e">Q3</span>, <span style="color:#a6e22e">infer</span> <span style="color:#a6e22e">R</span>]
        <span style="color:#f92672">?</span> <span style="color:#a6e22e">Remainder</span>&lt;<span style="color:#f92672">LShift</span><span style="color:#960050;background-color:#1e0010">&lt;</span><span style="color:#a6e22e">AsUint8</span><span style="color:#960050;background-color:#1e0010">&lt;</span><span style="color:#a6e22e">R</span>&gt;, <span style="color:#ae81ff">1</span>, <span style="color:#a6e22e">A</span>[<span style="color:#ae81ff">4</span>]<span style="color:#f92672">&gt;</span>, <span style="color:#a6e22e">B</span><span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">extends</span> [<span style="color:#a6e22e">infer</span> <span style="color:#a6e22e">Q4</span>, <span style="color:#a6e22e">infer</span> <span style="color:#a6e22e">R</span>]
          <span style="color:#f92672">?</span> <span style="color:#a6e22e">Remainder</span>&lt;<span style="color:#f92672">LShift</span><span style="color:#960050;background-color:#1e0010">&lt;</span><span style="color:#a6e22e">AsUint8</span><span style="color:#960050;background-color:#1e0010">&lt;</span><span style="color:#a6e22e">R</span>&gt;, <span style="color:#ae81ff">1</span>, <span style="color:#a6e22e">A</span>[<span style="color:#ae81ff">5</span>]<span style="color:#f92672">&gt;</span>, <span style="color:#a6e22e">B</span><span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">extends</span> [<span style="color:#a6e22e">infer</span> <span style="color:#a6e22e">Q5</span>, <span style="color:#a6e22e">infer</span> <span style="color:#a6e22e">R</span>]
            <span style="color:#f92672">?</span> <span style="color:#a6e22e">Remainder</span>&lt;<span style="color:#f92672">LShift</span><span style="color:#960050;background-color:#1e0010">&lt;</span><span style="color:#a6e22e">AsUint8</span><span style="color:#960050;background-color:#1e0010">&lt;</span><span style="color:#a6e22e">R</span>&gt;, <span style="color:#ae81ff">1</span>, <span style="color:#a6e22e">A</span>[<span style="color:#ae81ff">6</span>]<span style="color:#f92672">&gt;</span>, <span style="color:#a6e22e">B</span><span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">extends</span> [<span style="color:#a6e22e">infer</span> <span style="color:#a6e22e">Q6</span>, <span style="color:#a6e22e">infer</span> <span style="color:#a6e22e">R</span>]
              <span style="color:#f92672">?</span> <span style="color:#a6e22e">Remainder</span>&lt;<span style="color:#f92672">LShift</span><span style="color:#960050;background-color:#1e0010">&lt;</span><span style="color:#a6e22e">AsUint8</span><span style="color:#960050;background-color:#1e0010">&lt;</span><span style="color:#a6e22e">R</span>&gt;, <span style="color:#ae81ff">1</span>, <span style="color:#a6e22e">A</span>[<span style="color:#ae81ff">7</span>]<span style="color:#f92672">&gt;</span>, <span style="color:#a6e22e">B</span><span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">extends</span> [<span style="color:#a6e22e">infer</span> <span style="color:#a6e22e">Q7</span>, <span style="color:#a6e22e">infer</span> <span style="color:#a6e22e">R</span>]
                <span style="color:#f92672">?</span> [<span style="color:#a6e22e">AsUint8</span><span style="color:#f92672">&lt;</span>[<span style="color:#a6e22e">Q0</span>, <span style="color:#a6e22e">Q1</span>, <span style="color:#a6e22e">Q2</span>, <span style="color:#a6e22e">Q3</span>, <span style="color:#a6e22e">Q4</span>, <span style="color:#a6e22e">Q5</span>, <span style="color:#a6e22e">Q6</span>, <span style="color:#a6e22e">Q7</span>]<span style="color:#f92672">&gt;</span>, <span style="color:#a6e22e">AsUint8</span>&lt;<span style="color:#f92672">R</span>&gt;]
                <span style="color:#f92672">:</span> <span style="color:#a6e22e">never</span>
              : <span style="color:#66d9ef">never</span>
            <span style="color:#f92672">:</span> <span style="color:#a6e22e">never</span>
          : <span style="color:#66d9ef">never</span>
        <span style="color:#f92672">:</span> <span style="color:#a6e22e">never</span>
      : <span style="color:#66d9ef">never</span>
    <span style="color:#f92672">:</span> <span style="color:#a6e22e">never</span>
  : <span style="color:#66d9ef">never</span>;

<span style="color:#75715e">// 加
</span><span style="color:#75715e"></span><span style="color:#a6e22e">type</span> <span style="color:#a6e22e">Add</span>&lt;<span style="color:#f92672">A</span> <span style="color:#a6e22e">extends</span> <span style="color:#a6e22e">number</span><span style="color:#960050;background-color:#1e0010">,</span> <span style="color:#a6e22e">B</span> <span style="color:#a6e22e">extends</span> <span style="color:#a6e22e">number</span>&gt; <span style="color:#f92672">=</span> <span style="color:#a6e22e">ToNumber</span>&lt;<span style="color:#f92672">Uint8Add</span><span style="color:#960050;background-color:#1e0010">&lt;</span><span style="color:#a6e22e">ToUint8</span><span style="color:#960050;background-color:#1e0010">&lt;</span><span style="color:#a6e22e">A</span>&gt;, <span style="color:#a6e22e">ToUint8</span>&lt;<span style="color:#f92672">B</span>&gt;<span style="color:#f92672">&gt;&gt;</span>;
<span style="color:#75715e">// 减
</span><span style="color:#75715e"></span><span style="color:#a6e22e">type</span> <span style="color:#a6e22e">Sub</span>&lt;<span style="color:#f92672">A</span> <span style="color:#a6e22e">extends</span> <span style="color:#a6e22e">number</span><span style="color:#960050;background-color:#1e0010">,</span> <span style="color:#a6e22e">B</span> <span style="color:#a6e22e">extends</span> <span style="color:#a6e22e">number</span>&gt; <span style="color:#f92672">=</span> <span style="color:#a6e22e">ToNumber</span>&lt;<span style="color:#f92672">Uint8Sub</span><span style="color:#960050;background-color:#1e0010">&lt;</span><span style="color:#a6e22e">ToUint8</span><span style="color:#960050;background-color:#1e0010">&lt;</span><span style="color:#a6e22e">A</span>&gt;, <span style="color:#a6e22e">ToUint8</span>&lt;<span style="color:#f92672">B</span>&gt;<span style="color:#f92672">&gt;&gt;</span>;
<span style="color:#75715e">// 乘
</span><span style="color:#75715e"></span><span style="color:#a6e22e">type</span> <span style="color:#a6e22e">Mul</span>&lt;<span style="color:#f92672">A</span> <span style="color:#a6e22e">extends</span> <span style="color:#a6e22e">number</span><span style="color:#960050;background-color:#1e0010">,</span> <span style="color:#a6e22e">B</span> <span style="color:#a6e22e">extends</span> <span style="color:#a6e22e">number</span>&gt; <span style="color:#f92672">=</span> <span style="color:#a6e22e">ToNumber</span>&lt;<span style="color:#f92672">Uint8Mul</span><span style="color:#960050;background-color:#1e0010">&lt;</span><span style="color:#a6e22e">ToUint8</span><span style="color:#960050;background-color:#1e0010">&lt;</span><span style="color:#a6e22e">A</span>&gt;, <span style="color:#a6e22e">ToUint8</span>&lt;<span style="color:#f92672">B</span>&gt;<span style="color:#f92672">&gt;&gt;</span>;
<span style="color:#75715e">// 除
</span><span style="color:#75715e"></span><span style="color:#a6e22e">type</span> <span style="color:#a6e22e">Div</span>&lt;<span style="color:#f92672">A</span> <span style="color:#a6e22e">extends</span> <span style="color:#a6e22e">number</span><span style="color:#960050;background-color:#1e0010">,</span> <span style="color:#a6e22e">B</span> <span style="color:#a6e22e">extends</span> <span style="color:#a6e22e">number</span>&gt; <span style="color:#f92672">=</span> <span style="color:#a6e22e">B</span> <span style="color:#66d9ef">extends</span> <span style="color:#ae81ff">0</span> <span style="color:#f92672">?</span> <span style="color:#a6e22e">never</span> : <span style="color:#66d9ef">ToNumber</span>&lt;<span style="color:#f92672">Uint8Div</span><span style="color:#960050;background-color:#1e0010">&lt;</span><span style="color:#a6e22e">ToUint8</span><span style="color:#960050;background-color:#1e0010">&lt;</span><span style="color:#a6e22e">A</span>&gt;, <span style="color:#a6e22e">ToUint8</span>&lt;<span style="color:#f92672">B</span>&gt;<span style="color:#f92672">&gt;</span>[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">&gt;</span>;
<span style="color:#75715e">// 取余
</span><span style="color:#75715e"></span><span style="color:#a6e22e">type</span> <span style="color:#a6e22e">Mod</span>&lt;<span style="color:#f92672">A</span> <span style="color:#a6e22e">extends</span> <span style="color:#a6e22e">number</span><span style="color:#960050;background-color:#1e0010">,</span> <span style="color:#a6e22e">B</span> <span style="color:#a6e22e">extends</span> <span style="color:#a6e22e">number</span>&gt; <span style="color:#f92672">=</span> <span style="color:#a6e22e">B</span> <span style="color:#66d9ef">extends</span> <span style="color:#ae81ff">0</span> <span style="color:#f92672">?</span> <span style="color:#a6e22e">never</span> : <span style="color:#66d9ef">ToNumber</span>&lt;<span style="color:#f92672">Uint8Div</span><span style="color:#960050;background-color:#1e0010">&lt;</span><span style="color:#a6e22e">ToUint8</span><span style="color:#960050;background-color:#1e0010">&lt;</span><span style="color:#a6e22e">A</span>&gt;, <span style="color:#a6e22e">ToUint8</span>&lt;<span style="color:#f92672">B</span>&gt;<span style="color:#f92672">&gt;</span>[<span style="color:#ae81ff">1</span>]<span style="color:#f92672">&gt;</span>;

<span style="color:#75715e">// 测试
</span><span style="color:#75715e"></span><span style="color:#a6e22e">type</span> <span style="color:#a6e22e">case1_ShouldBe99</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">Add</span>&lt;<span style="color:#f92672">33</span><span style="color:#960050;background-color:#1e0010">,</span> <span style="color:#a6e22e">66</span>&gt;; <span style="color:#75715e">// 33 + 66 = 99
</span><span style="color:#75715e"></span><span style="color:#a6e22e">type</span> <span style="color:#a6e22e">case2_ShouldBe0</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">Add</span>&lt;<span style="color:#f92672">255</span><span style="color:#960050;background-color:#1e0010">,</span> <span style="color:#a6e22e">1</span>&gt;; <span style="color:#75715e">// 255 + 1 = 0 (overflow)
</span><span style="color:#75715e"></span>
<span style="color:#66d9ef">const</span> <span style="color:#a6e22e">a</span>: <span style="color:#66d9ef">case1_ShouldBe99</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">99</span>;

<span style="color:#a6e22e">type</span> <span style="color:#a6e22e">case3_ShouldBe99</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">Sub</span>&lt;<span style="color:#f92672">123</span><span style="color:#960050;background-color:#1e0010">,</span> <span style="color:#a6e22e">24</span>&gt;; <span style="color:#75715e">// 123 - 24 = 99
</span><span style="color:#75715e"></span><span style="color:#a6e22e">type</span> <span style="color:#a6e22e">case4_ShouldBe255</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">Sub</span>&lt;<span style="color:#f92672">0</span><span style="color:#960050;background-color:#1e0010">,</span> <span style="color:#a6e22e">1</span>&gt;; <span style="color:#75715e">// 0 - 1 = 255 (overflow)
</span><span style="color:#75715e"></span>
<span style="color:#a6e22e">type</span> <span style="color:#a6e22e">case5_ShouldBe153</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">Mul</span>&lt;<span style="color:#f92672">17</span><span style="color:#960050;background-color:#1e0010">,</span> <span style="color:#a6e22e">9</span>&gt;; <span style="color:#75715e">// 17 x 9 = 153
</span><span style="color:#75715e"></span><span style="color:#a6e22e">type</span> <span style="color:#a6e22e">case6_ShouldBe253</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">Mul</span>&lt;<span style="color:#f92672">255</span><span style="color:#960050;background-color:#1e0010">,</span> <span style="color:#a6e22e">3</span>&gt;; <span style="color:#75715e">// 255 x 3 = 253 (overflow)
</span><span style="color:#75715e"></span>
<span style="color:#a6e22e">type</span> <span style="color:#a6e22e">case7_ShouldBe33</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">Div</span>&lt;<span style="color:#f92672">100</span><span style="color:#960050;background-color:#1e0010">,</span> <span style="color:#a6e22e">3</span>&gt;; <span style="color:#75715e">// 100 / 3 = 33
</span><span style="color:#75715e"></span><span style="color:#a6e22e">type</span> <span style="color:#a6e22e">case8_ShouldBeNever</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">Div</span>&lt;<span style="color:#f92672">1</span><span style="color:#960050;background-color:#1e0010">,</span> <span style="color:#a6e22e">0</span>&gt;; <span style="color:#75715e">// 1 / 0 = error (divide by 0)
</span><span style="color:#75715e"></span>
<span style="color:#a6e22e">type</span> <span style="color:#a6e22e">case9_ShouldBe1</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">Mod</span>&lt;<span style="color:#f92672">100</span><span style="color:#960050;background-color:#1e0010">,</span> <span style="color:#a6e22e">3</span>&gt;; <span style="color:#75715e">// 100 % 3 = 1
</span><span style="color:#75715e"></span><span style="color:#a6e22e">type</span> <span style="color:#a6e22e">case10_ShouldBeNever</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">Mod</span>&lt;<span style="color:#f92672">1</span><span style="color:#960050;background-color:#1e0010">,</span> <span style="color:#a6e22e">0</span>&gt;; <span style="color:#75715e">// 1 % 0 = error (divide by 0)
</span></code></pre></div>
    <h4><a href="https://rx-78-kum0.github.io/">Back to Home</a></h4>
</div>


        </div><footer class="container">
    <hr class="soften">
    <p>

&copy; 

    JM Fergeau

<span id="thisyear">2020</span>

</p>
    <p class="text-center">
        
        
        
        <a href="https://github.com/rx-78-kum0">GitHub</a> 
        
    </p>
</footer>

</body><link rel="stylesheet" href="/css/bootstrap.css">
<link rel="stylesheet" href="/css/bootstrap-responsive.css">
<link rel="stylesheet" href="/css/style.css">
<script src="/js/jquery.js"></script>
<script src="/js/bootstrap-386.js"></script>
<script src="/js/bootstrap-transition.js"></script>
<script src="/js/bootstrap-alert.js"></script>
<script src="/js/bootstrap-modal.js"></script>
<script src="/js/bootstrap-dropdown.js"></script>
<script src="/js/bootstrap-scrollspy.js"></script>
<script src="/js/bootstrap-tab.js"></script>
<script src="/js/bootstrap-tooltip.js"></script>
<script src="/js/bootstrap-popover.js"></script>
<script src="/js/bootstrap-button.js"></script>
<script src="/js/bootstrap-collapse.js"></script>
<script src="/js/bootstrap-carousel.js"></script>
<script src="/js/bootstrap-typeahead.js"></script>
<script src="/js/bootstrap-affix.js"></script>
<script>
    _386 = { 
        fastLoad: true ,
        onePass: true , 
        speedFactor: 5 
    };

    
    function ThisYear() {
        document.getElementById('thisyear').innerHTML = new Date().getFullYear();
    };
</script></html>
